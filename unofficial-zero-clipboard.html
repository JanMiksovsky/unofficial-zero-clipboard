<!--
Presents a button or other content that, when clicked, will copy text to the
clipboard.

By default, this shows a "Copy to clipboard" button, but this can be replaced
with any content.
-->

<link rel="import" href="../polymer/polymer.html">

<script src="../zeroclipboard/ZeroClipboard.js"></script>

<polymer-element name="zero-clipboard" attributes="text">

<template>

  <style>
  :host {
    display: inline-block;
  }

  #container {
    visibility: hidden;
  }
  </style>

  <div id="container">
    <content>
      <button>Copy to clipboard</button>
    </content>
  </div>

</template>

<script>
Polymer( "zero-clipboard", {

  ready: function() {
    // Load the ZeroClipboard client.
    var moviePath = this.resolvePath( "../zeroclipboard/ZeroClipboard.swf" );
    ZeroClipboard.config({
      moviePath: moviePath
    });
    this._client = new ZeroClipboard( this.$.container );
    this._client.on( "load", function() {
      // Only show button (or whatever the trigger is) when client is loaded.
      this.$.container.style.visibility = "visible";
    }.bind( this ));
    this._client.on( "dataRequested", function( client, args ) {
      // ZeroClipboard wants to know what text to put on the clipboard.
      client.setText( this.text );
    }.bind( this ));
  }

});
</script>

</polymer-element>
